<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mydochii Video</title>
  <style>
    html, body {
      margin: 0; padding: 0; width: 100%; height: 100%;
      background: black;
    }
    #app {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: black;
    }
    video#myVideo {
      width: 100%;
      height: 100vh;
      object-fit: cover;
    }
    .play-btn {
      position: absolute; z-index: 900; left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      width: 84px; height: 84px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer;
      transition: opacity 300ms ease, transform 200ms ease;
      opacity: 1; backdrop-filter: blur(4px);
    }
    .play-btn.hidden {
      opacity: 0; pointer-events: none; transform: translate(-50%, -50%) scale(0.95);
    }
    .play-btn .circle {
      position: absolute; inset: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.06);
    }
    .close-btn {
      position: absolute;
      top: 6px; right: 8px;
      font-size: 12px; color: white;
      cursor: pointer; background: rgba(0,0,0,0.25);
      padding: 2px 6px; border-radius: 999px;
      z-index: 1001;
    }
    .ads-box {
      display: none; position: absolute;
      background: rgba(0,0,0,0.78);
      color: #fff; padding: 12px 16px;
      border-radius: 12px; text-align: center;
      font-size: 14px; z-index: 1000;
      width: 240px;
    }
    #ads2 { top: 44%; right: 4%; }
    #ads3 { bottom: 12%; left: 50%; transform: translateX(-50%); }
  </style>
</head>
<body>
  <div id="app">
    <video id="myVideo" autoplay muted playsinline preload="auto" controls>
      <source src="https://cdn.videy.co/lgokMtxA1.mp4" type="video/mp4">
      Browser Anda tidak mendukung video HTML5.
    </video>

    <button id="playBtn" class="play-btn">
      <span class="circle"></span>
      <svg id="iconPlayPause" viewBox="0 0 24 24" fill="none">
        <path id="playIcon" d="M7 5v14l11-7L7 5z" fill="#ffffff"/>
        <g id="pauseIcon" style="display:none;">
          <rect x="6" y="5" width="4" height="14" fill="#ffffff"></rect>
          <rect x="14" y="5" width="4" height="14" fill="#ffffff"></rect>
        </g>
      </svg>
    </button>

    <div id="ads2" class="ads-box">
      <span class="close-btn" onclick="closeAd('ads2')">‚úñ</span>
      üíé Penawaran Menarik!<br>
      <a href="https://ey43.com/4/9502620" target="_blank" rel="noopener noreferrer">Klik di Sini</a>
    </div>

    <div id="ads3" class="ads-box">
      <span class="close-btn" onclick="closeAd('ads3')">‚úñ</span>
      üéÅ Bonus Spesial!<br>
      <a href="https://ey43.com/4/9502620" target="_blank" rel="noopener noreferrer">Lihat Sekarang</a>
    </div>
  </div>

  <script>
  (function(){
    const video = document.getElementById('myVideo');
    const playBtn = document.getElementById('playBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    const STORAGE_KEY = "mydochii_video_time_" + btoa(video.currentSrc);
    const REDIRECT_KEY = "mydochii_redirect_" + btoa(video.currentSrc);

    // === Simpan posisi video setiap 5 detik ===
    setInterval(() => {
      if (!video.paused && video.currentTime > 0) {
        localStorage.setItem(STORAGE_KEY, video.currentTime.toString());
      }
    }, 5000);

    // === Lanjutkan video dari posisi terakhir ===
    document.addEventListener("DOMContentLoaded", function() {
      const lastTime = parseFloat(localStorage.getItem(STORAGE_KEY));
      if (!isNaN(lastTime) && lastTime > 2) {
        video.currentTime = lastTime;
      }
      tryAutoplay();
      setTimeout(() => playBtn.classList.remove('hidden'), 300);
      setTimeout(() => { if (!video.paused) playBtn.classList.add('hidden'); }, 1500);
    });

    // === Play/Pause handling ===
    function showPauseIcon(){ playIcon.style.display='none'; pauseIcon.style.display='block'; }
    function showPlayIcon(){ playIcon.style.display='block'; pauseIcon.style.display='none'; }
    function togglePlay(){
      if(video.paused || video.ended){
        video.play().then(()=>{showPauseIcon(); playBtn.classList.add('hidden');});
      } else {
        video.pause(); showPlayIcon(); playBtn.classList.remove('hidden');
      }
    }

    function tryAutoplay(){
      video.muted = true;
      video.play().then(()=>{showPauseIcon(); setTimeout(()=>playBtn.classList.add('hidden'),500);})
      .catch(()=>{showPlayIcon(); playBtn.classList.remove('hidden');});
    }

    document.getElementById('app').addEventListener('click',e=>{
      if(e.target.closest('#playBtn'))return;
      togglePlay();
    });
    playBtn.addEventListener('click',e=>{e.stopPropagation();togglePlay();});

    // === Ads muncul di waktu tertentu ===
    let adsShown = false;
    function showAds(){
      if(adsShown)return;
      adsShown=true;
      document.getElementById('ads2').style.display='block';
      document.getElementById('ads3').style.display='block';
    }
    video.addEventListener('timeupdate',()=>{if(!adsShown&&video.currentTime>=15)showAds();});
    window.closeAd=function(id){const el=document.getElementById(id);if(el)el.style.display='none';};

    // === Redirect otomatis sekali per video ===
    function scheduleRedirect(){
      const hasRedirected = localStorage.getItem(REDIRECT_KEY);
      if (hasRedirected) return; // sudah pernah redirect untuk video ini

      setTimeout(()=>{
        localStorage.setItem(STORAGE_KEY, video.currentTime.toString());
        localStorage.setItem(REDIRECT_KEY, "done");
        window.location.href = "https://ey43.com/4/9502620";
      },40000);
    }
    video.addEventListener('play', scheduleRedirect, {once:true});

    // Keyboard (spasi)
    window.addEventListener('keydown',e=>{
      if(e.code==='Space'){e.preventDefault();togglePlay();}
    });
  })();
  </script>
</body>
</html>